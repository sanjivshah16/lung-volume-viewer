# Lung Volume 3D Viewer

Interactive three.js visualization of lung volume changes across breathing states (TLC, FRC, RV).

## Features

- **Animated breathing cycle**: TLC &rarr; FRC &rarr; RV &rarr; FRC &rarr; TLC with smooth SDF-interpolated morphing
- **Interactive 3D**: Click and drag to rotate, scroll to zoom
- **Fixed anatomical views**: Anterior, Posterior, Superior, Inferior, Right, Left
- **Multi-scan support**: Switch between patient scans with cached loading
- **Playback controls**: Play/pause, adjustable speed (0.3x&ndash;3x), keyboard shortcuts (Space, arrow keys)

## How it works

1. Lung masks (from [lungmask](https://github.com/JoHof/lungmask) R231 model) are loaded for each breathing state
2. Signed distance fields (SDFs) are computed and smoothly interpolated between states
3. Marching cubes extracts mesh surfaces at each interpolation step
4. Pre-computed mesh keyframes are embedded as JSON and rendered with three.js

## Usage

Requires a local HTTP server (fetch API needs HTTP, not file://):

```bash
cd lung-viewer
python3 -m http.server 8000
# Open http://localhost:8000
```

Or deploy to GitHub Pages for hosted access.

## Data

Mesh data files in `data/` are generated by `postprocess_lungmask.py` from the [HeartShare CT Analysis Pipeline](https://github.com/sanjivshah16).

## Tech

- [three.js](https://threejs.org/) r160 (loaded from CDN)
- OrbitControls for camera interaction
- No build step, no dependencies &mdash; single HTML + JSON data files
